generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
}

model VipLevelManagement {
  id                             Int   @id @default(autoincrement())
  level                          Int   @unique // VIP Level (1–8)
  minAmount                      Float @map("min_amount")
  taskCount                      Int   @map("task_count")
  taskSet                        Int   @map("task_set") // "3Task Set" মানে 3
  commissionPercentage           Float @map("commission_percentage")
  comboCommissionPercentage      Float @map("combo_commission_percentage")
  productRangeMinPercent         Float @map("product_range_min_percent")
  productRangeMaxPercent         Float @map("product_range_max_percent")
  minWithdrawalAmount            Float @map("min_withdrawal_amount")
  maxWithdrawalAmount            Float @map("max_withdrawal_amount")
  completedTasksPerDayToWithdraw Int   @map("completed_tasks_per_day_to_withdraw")
  withdrawalFeesPercent          Float @map("withdrawal_fees_percent")

  @@map("vip_level_management")
}

model Admin {
  id       Int     @id @default(autoincrement())
  name     String? @db.VarChar(100)
  password String? @db.VarChar(255)
  role     String  @default("admin") @db.VarChar(50)

  whatsappUrl  String? @db.VarChar(255)
  telegramUrl1 String? @db.VarChar(255)
  whatsappUrl2 String? @db.VarChar(255)
  whatsappUrl3 String? @db.VarChar(255)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("admins")
}

model Project {
  id             Int        @id @default(autoincrement())
  projectName    String     @map("project_name")
  marketID       Int        @map("market_id")
  isUpdateWallet Boolean    @default(false) @map("is_update_wallet")
  active         Boolean    @default(true)
  users          Customer[]

  @@map("projects")
}

model SalesStatus {
  id                 Int                 @id @default(autoincrement())
  name               String
  active             Boolean             @default(true)
  depositRecords     DepositRecord[]
  withdrawals        Withdrawal[]
  transactionRecords TransactionRecord[]
  customerTasks      CustomerTask[]

  @@map("sales_statuses")
}

model WithdrawalRejectReason {
  id          Int          @id @default(autoincrement())
  name        String
  active      Boolean      @default(true)
  withdrawals Withdrawal[]

  @@map("withdrawal_reject_reasons")
}

model Currency {
  id                          Int     @id @default(autoincrement())
  name                        String
  code                        String
  active                      Boolean @default(true)
  isFiat                      Boolean @default(false) @map("is_fiat")
  isDeposit                   Boolean @default(false) @map("is_deposit")
  isWithdraw                  Boolean @default(false) @map("is_withdraw")
  rateFromUSDT                Float?  @map("rate_from_usdt")
  depositChargesPercentage    Float?  @map("deposit_charges_percentage")
  withdrawalChargesPercentage Float?  @map("withdrawal_charges_percentage")
  rateFromFiat                Float?  @map("rate_from_fiat")
  networkName                 String? @map("network_name")
  rateToUSDT                  Float?  @map("rate_to_usdt")

  @@map("currencies")
}

model AmbassadorLevel {
  id                                    Int        @id @default(autoincrement())
  ambassadorLevel                       Int        @map("ambassador_level")
  ambassadorLevelName                   String     @map("ambassador_level_name")
  requiredDirectReferrals               Int?       @map("required_direct_referrals")
  requiredIndirectReferrals             Int?       @map("required_indirect_referrals")
  requiredMemberTypeID                  Int?       @map("required_member_type_id")
  requiredMemberTypeReferrals           Int?       @map("required_member_type_referrals")
  cashBonusGiven                        Float?     @map("cash_bonus_given")
  packageBonusGiven                     Float?     @map("package_bonus_given")
  weeklyIncentivePercentage             Float?     @map("weekly_incentive_percentage")
  incentivePercentage                   Float?     @map("incentive_percentage")
  entitledMultipleLevels                Json?      @map("entitled_multiple_levels")
  eachSetTaskNumber                     Int?       @map("each_set_task_number")
  totalTaskSet                          Int?       @map("total_task_set")
  comboTaskIncentivePercentage          Int?       @map("combo_task_incentive_percentage")
  taskPriceRangeFrom                    Float?     @map("task_price_range_from")
  taskPriceRangeTo                      Float?     @map("task_price_range_to")
  minWithdrawalAmount                   Float?     @map("min_withdrawal_amount")
  maxWithdrawalAmount                   Float?     @map("max_withdrawal_amount")
  requiredTaskCountToWithdraw           Int?       @map("required_task_count_to_withdraw")
  withdrawalFees                        Float?     @map("withdrawal_fees")
  profitPriceRangeFrom                  Float?     @map("profit_price_range_from")
  profitPriceRangeTo                    Float?     @map("profit_price_range_to")
  cappingProfitAmount                   Float?     @map("capping_profit_amount")
  minTotalSalesAmount                   Float?     @map("min_total_sales_amount")
  maxTotalSalesAmount                   Float?     @map("max_total_sales_amount")
  monthlyIncentivePercentage            Float?     @map("monthly_incentive_percentage")
  isWaiveWithdrawalFees                 Boolean?   @map("is_waive_withdrawal_fees")
  entitledCommissionLevels              Json?      @map("entitled_commission_levels")
  requiredMemberTypeAmbassadorLevelName String?    @map("required_member_type_ambassador_level_name")
  customers                             Customer[]

  @@map("ambassador_levels")
}

// ---------- User (API: User.json) ----------

// ---------- Customer (API: CustomerProfile.json, CustomerDetail.json) ----------

model Customer {
  id Int @id @default(autoincrement())

  // ---------- BASIC / AUTH ----------
  userName           String?   @map("user_name")
  userID             Int?      @unique @map("user_id")
  password           String?   @map("password")
  loginPassword      String?   @map("login_password")
  withdrawalPassword String?   @map("withdrawal_password")
  email              String?
  phoneNumber        String?   @map("phone_number")
  nrc                String?
  birthday           DateTime? @db.Date

  // ---------- ROLES / FLAGS ----------
  isAdmin          Boolean  @default(false) @map("is_admin")
  isSupervisor     Boolean  @default(false) @map("is_supervisor")
  isCompanyAgent   Boolean  @default(false) @map("is_company_agent")
  isDisabled       Boolean  @default(false) @map("is_disabled")
  loginIsDisabled  Boolean? @map("login_is_disabled")
  isPopUpJoinGroup Boolean  @default(false) @map("is_pop_up_join_group")

  // ---------- PROJECT ----------
  projectID   Int?     @map("project_id")
  projectName String?  @map("project_name")
  brand       String?
  project     Project? @relation(fields: [projectID], references: [id])

  // ---------- REFERRAL ----------
  referrerCustomerID Int?       @map("referrer_customer_id")
  recommendBy        String?    @map("recommend_by")
  referralCode       String?    @map("referral_code")
  referralCode2      String?    @map("referral_code2")
  referrer           Customer?  @relation("CustomerReferrer", fields: [referrerCustomerID], references: [id])
  referrals          Customer[] @relation("CustomerReferrer")

  // ---------- FINANCIAL ----------
  assetBalance          Float? @map("asset_balance")
  actualWalletBalance   Float? @map("actual_wallet_balance")
  totalProfit           Float? @map("total_profit")
  totalDepositAmount    Float? @map("total_deposit_amount")
  totalWithdrawalAmount Float? @map("total_withdrawal_amount")
  totalExpensesAmount   Float? @map("total_expenses_amount")
  totalSalesAmount      Float? @map("total_sales_amount")
  totalThirdPartyAmount Float? @map("total_third_party_amount")
  totalPayoutAmount     Float? @map("total_payout_amount")
  totalPNLAmount        Float? @map("total_pnl_amount")
  convertedAmountList   Json?  @map("converted_amount_list")

  // ---------- TASK / COMMISSION ----------
  eachSetTaskNumber             Int?   @map("each_set_task_number")
  totalTaskSet                  Int?   @map("total_task_set")
  currentTaskNumber             Int?   @map("current_task_number")
  todayTaskProfit               Float? @map("today_task_profit")
  normalCommissionPercentage    Float? @map("normal_commission_percentage")
  packageCommissionPercentage   Float? @map("package_commission_percentage")
  ambassadorIncentivePercentage Float? @map("ambassador_incentive_percentage")

  // ---------- BANK ----------
  bankAccount             String? @map("bank_account")
  bankHolderName          String? @map("bank_holder_name")
  bankVendorID            Int?    @map("bank_vendor_id")
  bankVendorName          String? @map("bank_vendor_name")
  withdrawalFullName      String? @map("withdrawal_full_name")
  withdrawalWalletAddress String? @map("withdrawal_wallet_address")

  // ---------- LOG / META ----------
  loginLogIPAddress String?   @map("login_log_ip_address")
  createdBy         String?   @map("created_by")
  createdDate       DateTime? @map("created_date")
  updatedBy         String?   @map("updated_by")
  updatedDate       DateTime? @map("updated_date")

  // ---------- JSON ----------
  taskProgress       Json? @map("task_progress")
  taskDetails        Json? @map("task_details")
  recommendCustomers Json? @map("recommend_customers")
  wallets            Json?

  // ---------- RELATIONS ----------
  bankDetails        CustomerBankDetail[]
  depositRecords     DepositRecord[]
  withdrawals        Withdrawal[]
  transactionRecords TransactionRecord[]
  customerTasks      CustomerTask[]
  ambassadorLevel    AmbassadorLevel?     @relation(fields: [ambassadorLevelId], references: [id])
  ambassadorLevelId  Int?

  @@map("customers")
}

// ---------- CustomerBankDetail (API: CustomerProfile.bankDetails[]) ----------

model CustomerBankDetail {
  id                                  Int          @id @default(autoincrement())
  customerID                          Int          @map("customer_id")
  bankVendorID                        Int?         @map("bank_vendor_id")
  bankVendorName                      String?      @map("bank_vendor_name")
  bankAccountHolderName               String?      @map("bank_account_holder_name")
  bankAccountNumber                   String?      @map("bank_account_number")
  secondBankAccountNumber             String?      @map("second_bank_account_number")
  secondOptionBankVendorID            Int?         @map("second_option_bank_vendor_id")
  secondOptionBankAccountHolderName   String?      @map("second_option_bank_account_holder_name")
  secondOptionBankAccountNumber       String?      @map("second_option_bank_account_number")
  secondOptionSecondBankAccountNumber String?      @map("second_option_second_bank_account_number")
  secondOptionBankVendorName          String?      @map("second_option_bank_vendor_name")
  manualBankName                      String?      @map("manual_bank_name")
  active                              Boolean      @default(true)
  customer                            Customer     @relation(fields: [customerID], references: [id], onDelete: Cascade)
  withdrawals                         Withdrawal[]

  @@map("customer_bank_details")
}

// ---------- DepositRecord (API: DepositRecords.json) ----------

model DepositRecord {
  id          Int         @id @default(autoincrement())
  customerID  Int?        @map("customer_id")
  amount      Float
  statusID    Int         @map("status_id")
  statusName  String?     @map("status_name")
  createdDate DateTime?   @map("created_date")
  numberCode  String?     @map("number_code")
  customer    Customer?   @relation(fields: [customerID], references: [id])
  status      SalesStatus @relation(fields: [statusID], references: [id])

  @@map("deposit_records")
}

// ---------- Withdrawal (API: Withdrawal.json) ----------

model Withdrawal {
  id                                Int                     @id @default(autoincrement())
  customerID                        Int                     @map("customer_id")
  clientName                        String                  @map("client_name")
  amount                            Float
  statusID                          Int                     @map("status_id")
  statusName                        String                  @map("status_name")
  createdBy                         String?                 @map("created_by")
  createdDate                       DateTime?               @map("created_date")
  updatedBy                         String?                 @map("updated_by")
  updatedDate                       DateTime?               @map("updated_date")
  numberCode                        String?                 @map("number_code")
  loginUserName                     String?                 @map("login_user_name")
  fullName                          String?                 @map("full_name")
  walletAddress                     String?                 @map("wallet_address")
  exchangeName                      String?                 @map("exchange_name")
  phoneNumber                       String?                 @map("phone_number")
  bankVendorID                      Int?                    @map("bank_vendor_id")
  bankVendorName                    String?                 @map("bank_vendor_name")
  bankAccountHolderName             String?                 @map("bank_account_holder_name")
  bankAccountNumber                 String?                 @map("bank_account_number")
  thirdPartyID                      Int?                    @map("third_party_id")
  thirdPartyName                    String?                 @map("third_party_name")
  companyAgentClientName            String?                 @map("company_agent_client_name")
  customerPhoneNumber               String?                 @map("customer_phone_number")
  approvedDate                      DateTime?               @map("approved_date") @db.DateTime
  memberTypeID                      Int?                    @map("member_type_id")
  memberTypeName                    String?                 @map("member_type_name")
  charges                           Float?
  finalAmount                       Float?                  @map("final_amount")
  rejectReasonID                    Int?                    @map("reject_reason_id")
  rejectReasonName                  String?                 @map("reject_reason_name")
  secondBankAccountNumber           String?                 @map("second_bank_account_number")
  manualBankName                    String?                 @map("manual_bank_name")
  remark                            String?                 @db.Text
  assetBalance                      Float?                  @map("asset_balance")
  referrerCustomerLoginUserName     String?                 @map("referrer_customer_login_user_name")
  isHideFrontend                    Boolean?                @map("is_hide_frontend")
  secondOptionBankAccountHolderName String?                 @map("second_option_bank_account_holder_name")
  customerBankDetailID              Int?                    @map("customer_bank_detail_id")
  imageUrl                          Json?                   @map("image_url")
  isDuplicateBank                   Boolean?                @map("is_duplicate_bank")
  fiatCurrencyID                    Int?                    @map("fiat_currency_id")
  fiatRate                          Float?                  @map("fiat_rate")
  fiatActualAmount                  Float?                  @map("fiat_actual_amount")
  fiatCurrencyName                  String?                 @map("fiat_currency_name")
  customer                          Customer                @relation(fields: [customerID], references: [id])
  customerBankDetail                CustomerBankDetail?     @relation(fields: [customerBankDetailID], references: [id])
  status                            SalesStatus             @relation(fields: [statusID], references: [id])
  rejectReason                      WithdrawalRejectReason? @relation(fields: [rejectReasonID], references: [id])

  @@map("withdrawals")
}

// ---------- WithdrawalRecord (API: WithdrawalRecords.json - summary list) ----------

model WithdrawalRecord {
  id          Int       @id @default(autoincrement())
  amount      Float
  statusName  String    @map("status_name")
  createdDate DateTime? @map("created_date")
  remark      String?   @db.Text
  numberCode  String?   @map("number_code")

  @@map("withdrawal_records")
}

// ---------- Tasklist (API: Tasklist.json) ----------

model Tasklist {
  id                 Int                 @id @default(autoincrement())
  name               String
  taskValue          Float               @map("task_value")
  profit             Float?
  commission         Float?
  code               String
  currentMeetAmount  Float?              @map("current_meet_amount")
  customerID         Int?                @map("customer_id")
  imageUrl           String?             @map("image_url")
  imagesUrl          Json?               @map("images_url")
  milleage           Float?
  itemYear           Int?                @map("item_year")
  itemBrand          String?             @map("item_brand")
  model              String?
  categoryID         Int?                @map("category_id")
  categoryName       String?             @map("category_name")
  transactionRecords TransactionRecord[]
  customerTasks      CustomerTask[]

  @@map("tasklists")
}

// ---------- TransactionRecord (API: TransactionRecords.json) ----------

model TransactionRecord {
  id          Int         @id @default(autoincrement())
  customerID  Int?        @map("customer_id")
  taskID      Int?        @map("task_id")
  clientName  String      @map("client_name")
  taskName    String      @map("task_name")
  taskValue   Float       @map("task_value")
  profit      Float
  commission  Float
  code        String
  statusID    Int         @map("status_id")
  statusName  String      @map("status_name")
  typeID      Int         @map("type_id")
  imageUrl    String?     @map("image_url")
  numberCode  String?     @map("number_code")
  expiredDate DateTime?   @map("expired_date") @db.DateTime
  isExpired   Boolean     @default(false) @map("is_expired")
  customer    Customer?   @relation(fields: [customerID], references: [id])
  task        Tasklist?   @relation(fields: [taskID], references: [id])
  status      SalesStatus @relation(fields: [statusID], references: [id])

  @@map("transaction_records")
}

// ---------- CustomerTask (API: ByCustomerTask.json, PresetCustomerTasklist.json) ----------

model CustomerTask {
  id                              Int          @id @default(autoincrement())
  customerID                      Int?         @map("customer_id")
  taskID                          Int?         @map("task_id")
  clientName                      String?      @map("client_name")
  taskName                        String?      @map("task_name")
  taskValue                       Float?       @map("task_value")
  profit                          Float?
  commissionPercentage            Float?       @map("commission_percentage")
  code                            String?
  taskNumber                      Int?         @map("task_number")
  amount                          Float?
  statusID                        Int?         @map("status_id")
  statusName                      String?      @map("status_name")
  maxTaskNumber                   Int?         @map("max_task_number")
  isPackage                       Boolean?     @map("is_package")
  normalCommissionPercentage      Float?       @map("normal_commission_percentage")
  packageCommissionPercentage     Float?       @map("package_commission_percentage")
  imageUrl                        String?      @map("image_url")
  createdDate                     DateTime?    @map("created_date")
  createdBy                       String?      @map("created_by")
  updatedDate                     DateTime?    @map("updated_date")
  updatedBy                       String?      @map("updated_by")
  userID                          Int?         @map("user_id")
  userName                        String?      @map("user_name")
  numberCode                      String?      @map("number_code")
  isCombo                         Boolean?     @map("is_combo")
  roundNumber                     Int?         @map("round_number")
  comboTasklistID                 Int?         @map("combo_tasklist_id")
  loginUserName                   String?      @map("login_user_name")
  isPreSet                        Boolean?     @map("is_pre_set")
  totalRoundNumber                Int?         @map("total_round_number")
  negativeAmountFrom              Float?       @map("negative_amount_from")
  negativeAmountTo                Float?       @map("negative_amount_to")
  dateLabel                       String?      @map("date_label")
  categoryID                      Int?         @map("category_id")
  categoryName                    String?      @map("category_name")
  latestTaskNumber                Int?         @map("latest_task_number")
  bookingTypeName                 String?      @map("booking_type_name")
  goldenEggsAmount                Float?       @map("golden_eggs_amount")
  isGoldenEgg                     Boolean?     @map("is_golden_egg")
  goldenEggDetails                Json?        @map("golden_egg_details")
  isGoldenEggOpened               Boolean?     @map("is_golden_egg_opened")
  expiredDate                     DateTime?    @map("expired_date") @db.DateTime
  isExpired                       Boolean?     @map("is_expired")
  goldenEggID                     Int?         @map("golden_egg_id")
  walletBalance                   Float?       @map("wallet_balance")
  actualWalletBalance             Float?       @map("actual_wallet_balance")
  currentTaskNumber               Int?         @map("current_task_number")
  allTimeLastTaskNumber           Int?         @map("all_time_last_task_number")
  currentPendingTaskProfit        Float?       @map("current_pending_task_profit")
  customerCurrentTotalRoundNumber Int?         @map("customer_current_total_round_number")
  customerNumberCode              String?      @map("customer_number_code")
  isGoldenEggTask                 Boolean?     @map("is_golden_egg_task")
  count                           Int?
  customer                        Customer?    @relation(fields: [customerID], references: [id])
  task                            Tasklist?    @relation(fields: [taskID], references: [id])
  status                          SalesStatus? @relation(fields: [statusID], references: [id])

  @@map("customer_tasks")
}

// ---------- DailyCheckInProgramDetail (API: DailyCheckInProgramDetails.json) ----------

model DailyCheckInProgramDetail {
  id                       Int       @id @default(autoincrement())
  dayNumber                Int       @map("day_number")
  bonusAmountGiven         Float?    @map("bonus_amount_given")
  createdDate              DateTime? @map("created_date")
  createdBy                String?   @map("created_by")
  updatedDate              DateTime? @map("updated_date")
  updatedBy                String?   @map("updated_by")
  customerBonusAmountGiven Float?    @map("customer_bonus_amount_given")

  @@map("daily_check_in_program_details")
}

// ---------- Menu (API: menu.json) ----------

model Menu {
  id               Int     @id @default(autoincrement())
  name             String
  active           Boolean @default(true)
  isShowPending    Boolean @default(false) @map("is_show_pending")
  pendingNumber    Int?    @map("pending_number")
  isRing           Boolean @default(false) @map("is_ring")
  menuSequence     Int     @map("menu_sequence")
  isWithdrawalRing Boolean @default(false) @map("is_withdrawal_ring")

  @@map("menus")
}
